<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>circle • circle</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- ropensci --><link href="../ropensci.css?nocache=123" rel="stylesheet">
<meta property="og:title" content="circle">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-462421-8"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-462421-8');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://ropensci.org"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
        <a class="navbar-brand" href="../index.html"><i>circle <small>v0.5.0.9001</small></i></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/circle.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ropenscilabs/circle">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>circle</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropenscilabs/circle/blob/master/vignettes/circle.Rmd"><code>vignettes/circle.Rmd</code></a></small>
      <div class="hidden name"><code>circle.Rmd</code></div>

    </div>

    
    
<div id="authentication" class="section level1">
<h1 class="hasAnchor">
<a href="#authentication" class="anchor"></a>Authentication</h1>
<p>To get started with Circle CI on Github, make sure to install the <a href="https://github.com/marketplace/circleci">Circle CI Github App</a> and configure the “Free” plan for your account.</p>
<p>The first time any {circle} function is called, it will check for the existence of a Circle API key. This API key is needed to securely talk to the Circle CI API and make requests. There are two ways you can store the API key:</p>
<ul>
<li>Via environment variable <code>R_CIRCLE</code> in <code>~/.Renviron</code> (<strong>recommended</strong>)</li>
<li>In <code>~/.circleci/cli.yml</code> via the following pattern</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode yml"><code class="sourceCode yaml"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="fu">host:</span><span class="at"> https://circleci.com</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="fu">endpoint:</span><span class="at"> graphql-unstable</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="fu">token:</span><span class="at"> &lt;token&gt;</span></a></code></pre></div>
<p>In addition, {circle} scrapes information about the current repository from Github. To be able to do this, a <code>GITHUB_TOKEN</code> is needed. You can create one using <code><a href="https://usethis.r-lib.org/reference/browse_github_token.html">usethis::browse_github_token()</a></code> if you haven’t done so yet.</p>
</div>
<div id="deployment" class="section level1">
<h1 class="hasAnchor">
<a href="#deployment" class="anchor"></a>Deployment</h1>
<p>The easiest way to enable deployment from Circle CI builds to Github repositories is by using <code><a href="../reference/use_circle_deploy.html">use_circle_deploy()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">circle<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/circle/man/use_circle_deploy.html">use_circle_deploy</a></span>()</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">✖ No <span class="st">'user-key'</span> found.</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">──────────────────────────────────────────────────────────────────────────────────────────────────</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">✔ Added a <span class="st">'user key'</span> to project <span class="st">'&lt;repo-slug&gt;'</span> on Circle CI. </a>
<a class="sourceLine" id="cb2-5" data-line-number="5">This enables deployment from builds.</a></code></pre></div>
<p>This will generate an SSH key pair, store the public key in the Circle CI repo and the private key in your Github account under “Settings -&gt; SSH and GPG keys”.</p>
<p>To double-check, you now should have a “user-key” in your Circle CI repo settings under the menu point “Checkout keys”. It does not matter if another “deploy key” exists. The important point is that the “user key” is set as “preferred”.</p>
<div class="figure">
<img src="../man/figures/user-key.png" alt="Fig.1: Screenshot showing an existing user key for repository ‘ropenscilabs/circle’"><p class="caption">Fig.1: Screenshot showing an existing user key for repository ‘ropenscilabs/circle’</p>
</div>
<p>If you haven’t set a “user-key” yet, there will be a button on this page “Add User Key” which will do exactly the same as <code><a href="../reference/use_circle_deploy.html">circle::use_circle_deploy()</a></code>.</p>
<div id="deployment-keys" class="section level2">
<h2 class="hasAnchor">
<a href="#deployment-keys" class="anchor"></a>Deployment keys</h2>
<p>There two different types of keys on Circle CI:</p>
<ul>
<li><p>Checkout keys</p></li>
<li><p>SSH keys</p></li>
</ul>
<div id="checkout-keys" class="section level3">
<h3 class="hasAnchor">
<a href="#checkout-keys" class="anchor"></a>Checkout keys</h3>
<p>Checkout keys are used to checkout your repository so that the build is starting. These kind of keys how only “read” permissions but are not allow to “write” to your repository. If you’ve connected Circle CI to Github already, you will have a “deploy key” stored in every repository to be able to checkout the code. The name “deploy” key here is a bit misleading since they <strong>cannot</strong> be used for deploying from builds.</p>
<p>To enable deployment, a “user-key” is needed which has also “write” permissions. This key can be added using <code><a href="../reference/use_circle_deploy.html">use_circle_deploy()</a></code>. This function will add a so called “user key” to the settings of the repo on Circle CI. The private key will be added to your Github profile under the “SSH and GPG keys” section with the title pointing to the respective repo. See also <a href="circle/deployment.html">the section about deployment</a>.</p>
</div>
<div id="ssh-keys" class="section level3">
<h3 class="hasAnchor">
<a href="#ssh-keys" class="anchor"></a>SSH keys</h3>
<p>Circle also makes a distinction between “checkout keys” and “SSH keys”, both in the API endpoints and in the Circle CI repo settings (menu SSH permissions). Since “checkout keys” are also SSH keys, this creates confusion.</p>
<p>So far I could not figure out what the subtle differences here are and what “normal SSH keys” should be used for. If you care about build deployments, you are all set when using “checkout keys”.</p>
<hr>
<p>If you do not want to use <code><a href="../reference/use_circle_deploy.html">use_circle_deploy()</a></code> and go the manual way of adding a SSH key to Circle CI, please be aware of <a href="https://discuss.circleci.com/t/adding-ssh-keys-fails/7747">this issue</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#authentication">Authentication</a></li>
      <li>
<a href="#deployment">Deployment</a><ul class="nav nav-pills nav-stacked">
<li><a href="#deployment-keys">Deployment keys</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="http://github.com/ropensci" target="_blank"><div class="icon fab fa-github"></div></a>
                        <a href="http://github.com/ropenscilabs" target="_blank"><div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/ropensci" target="_blank"><div class="icon fab fa-twitter"></div></a>
                        <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Info</h5>
                            <li><a href="https://ropensci.org/about">Mission</a></li>
                            <li><a href="https://ropensci.org/about#team">Team</a></li>
                            <li><a href="https://ropensci.org/about#collaborators">Collaborators</a></li>
                            <li><a href="https://ropensci.org/careers">Careers</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Work</h5>
                            <li><a href="https://ropensci.org/packages/">Packages</a></li>
                            <li><a href="https://ropensci.org/blog/">Blog</a></li>
                            <li><a href="https://ropensci.org/technotes/">Tech Notes</a></li>
                            <li><a href="https://ropensci.org/tutorials/">Tutorials</a></li>
                            <li><a href="https://ropensci.org/usecases/">Use Cases</a></li>
                            <li><a href="https://ropensci.org/resources/">More Resources</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Participate</h5>
                            <li><a href="https://ropensci.org/contact/">Contact us</a></li>
                            <li><a href="https://ropensci.org/community/">Community</a></li>
                            <li><a href="https://ropensci.org/software-review/">Contribute software</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct">Code of conduct</a></li>
                            <li><a href="https://ropensci.org/events/">Events</a></li>
                            <li><a href="https://ropensci.org/commcalls/">Community calls</a></li>
                            <li><a href="https://ropensci.org/donate/">Donate</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                        <a href="http://numfocus.org" target="_blank"></a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
</div>

  


  </body>
</html>
